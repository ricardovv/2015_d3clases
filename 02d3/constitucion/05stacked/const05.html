
<!DOCTYPE html>
<!-- http://bl.ocks.org/mbostock/4679202 -->
<html>
    <head>
        <title>Simple Stack</title>
        <script src="http://d3js.org/d3.v2.js"></script>     
        <style>
            svg {
                border: solid 1px #ccc;
                font: 10px sans-serif;
                shape-rendering: crispEdges;
            }
        </style>             
    </head>
    <body>

        <div id="viz"></div>

        <script type="text/javascript">
            
            var w = 960,
            h = 500
            // create canvas
            var svg = d3.select("#viz").append("svg:svg")
            .attr("class", "chart")
            .attr("width", w)
            .attr("height", h )
            .append("svg:g")
            .attr("transform", "translate(10,470)");
            x = d3.scale.ordinal().rangeRoundBands([0, w-50])
            y = d3.scale.linear().range([0, h-20])
            z = d3.scale.ordinal().range(["darkblue", "blue", "lightblue"])


      // 4 columns: ID,c1,c2,c3
            var matrix = [
                [ 1,  50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550  ]
            ];

            var remapped =["c1","c2","c3","c4","c5","c6","c7","c8","c9","c10","c11"].map(function(dat,i){
                return matrix.map(function(d,ii){
                    return {x: ii, y: d[i+1] };
                })
            });

            var stacked = d3.layout.stack()(remapped)

            x.domain(stacked[0].map(function(d) { return d.x; }));
            y.domain([0, d3.max(stacked[stacked.length - 1], function(d) { return d.y0 + d.y; })]);
            // show the domains of the scales              

            // Add a group for each column.
            var valgroup = svg.selectAll("g.valgroup")
            .data(stacked)
            .enter().append("svg:g")
            .attr("class", "valgroup")
            //.style("stroke", function(d, i) { return d3.rgb(z(i)).darker(); });            
            .style("stroke", "yellow")
            //.style("fill", function(d, i) { return z(i); })
            .style("fill", "blue")
            ;
            
            // Add a rect for each date.
            var rect = valgroup.selectAll("rect")
            .data(function(d){return d;})
            .enter().append("svg:rect")
            .attr("x", function(d) { return x(d.x); })
            .attr("y", function(d) { return -y(d.y0) - y(d.y); })
            .attr("height", function(d) { return y(d.y); })
            //.attr("width", x.rangeBand());
            .attr("width", 100)
            ;

            
  

        </script>
    </body>
</html>